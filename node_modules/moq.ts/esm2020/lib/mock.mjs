import { Times } from "./times";
import { injectorFactory } from "./injector/injector.factory";
import { MOCK } from "./injector/mock.injection-token";
import { DefaultInjectorConfig } from "./injector/default-injector.config";
import { MockCore } from "./core/mock-core";
import { MOCK_CONSTRUCTOR } from "./injector/mock-constructor.injection-token";
/**
 * The default implementation of {@link IMock} interface.
 */
export class Mock {
    constructor(options = {}) {
        const preOptions = { ...Mock.options, ...options };
        const providers = [
            { provide: MOCK, useValue: this, deps: [] },
            { provide: MOCK_CONSTRUCTOR, useValue: (opts) => new Mock(opts), deps: [] },
        ];
        const injector = Mock.InjectorFactory(preOptions, ...providers);
        this.core = injector.get(MockCore);
    }
    /**
     * @hidden
     * Returns a method that is internally used for creating of an angular based injector
     */
    static get injectionFactory() {
        return Mock.InjectorFactory;
    }
    /**
     * @hidden
     * Sets a method that is internally used for creating of an angular based injector
     */
    static set injectionFactory(value) {
        Mock.InjectorFactory = value;
    }
    /**
     * The default mock options that would applied to all instantiating Mock objects.
     * By default it sets {@link IMockOptions.target} as a function, {@link IMockOptions.injectorConfig} as
     * instance of {@link DefaultInjectorConfig} and {@link IMockOptions.name} as undefined.
     * If an options are passed as constructor parameter {@link Mock.constructor} they will override the default options.
     */
    static get options() {
        if (Mock.Options === undefined) {
            Mock.Options = {
                target: () => undefined,
                injectorConfig: new DefaultInjectorConfig()
            };
        }
        return Mock.Options;
    }
    /**
     * The default mock options that would applied to all instantiating Mock objects.
     * If an options are passed as constructor parameter they will override the default options.
     */
    static set options(options) {
        Mock.Options = options;
    }
    get options() {
        return this.core.options;
    }
    get tracker() {
        return this.core.tracker;
    }
    get name() {
        return this.core.name;
    }
    setup(expression) {
        return this.core.setup(expression);
    }
    verify(expression, times = Times.Once()) {
        return this.core.verify(expression, times);
    }
    object() {
        return this.core.object();
    }
    prototypeof(prototype) {
        return this.core.prototypeof(prototype);
    }
    /**
     * @experimental
     */
    insequence(sequence, expression) {
        return this.core.insequence(sequence, expression);
    }
    resolve(token) {
        return this.core.resolve(token);
    }
}
Mock.Options = undefined;
Mock.InjectorFactory = injectorFactory;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9jay5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL21vcS9zcmMvbGliL21vY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUNoQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDOUQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQ3ZELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQzNFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUk1QyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQUkvRTs7R0FFRztBQUNILE1BQU0sT0FBTyxJQUFJO0lBS2IsWUFBWSxVQUEyQixFQUFFO1FBQ3JDLE1BQU0sVUFBVSxHQUFHLEVBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsT0FBTyxFQUFvQixDQUFDO1FBQ3BFLE1BQU0sU0FBUyxHQUFHO1lBQ2QsRUFBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBQztZQUN6QyxFQUFDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsQ0FBQyxJQUEyQixFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFDO1NBQ25HLENBQUM7UUFDRixNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFVBQVUsRUFBRSxHQUFHLFNBQVMsQ0FBQyxDQUFDO1FBQ2hFLElBQUksQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsTUFBTSxLQUFLLGdCQUFnQjtRQUN2QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7SUFDaEMsQ0FBQztJQUVEOzs7T0FHRztJQUNILE1BQU0sS0FBSyxnQkFBZ0IsQ0FBQyxLQUE2QjtRQUNyRCxJQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQztJQUNqQyxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSCxNQUFNLEtBQUssT0FBTztRQUNkLElBQUksSUFBSSxDQUFDLE9BQU8sS0FBSyxTQUFTLEVBQUU7WUFDNUIsSUFBSSxDQUFDLE9BQU8sR0FBRztnQkFDWCxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsU0FBUztnQkFDdkIsY0FBYyxFQUFFLElBQUkscUJBQXFCLEVBQUU7YUFDOUMsQ0FBQztTQUNMO1FBQ0QsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3hCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxNQUFNLEtBQUssT0FBTyxDQUFDLE9BQThCO1FBQzdDLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO0lBQzNCLENBQUM7SUFFRCxJQUFXLE9BQU87UUFDZCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQzdCLENBQUM7SUFFRCxJQUFXLE9BQU87UUFDZCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQzdCLENBQUM7SUFFRCxJQUFXLElBQUk7UUFDWCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQzFCLENBQUM7SUFFTSxLQUFLLENBQzZDLFVBQWE7UUFDbEUsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBRU0sTUFBTSxDQUFDLFVBQTBCLEVBQUUsS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLEVBQUU7UUFDMUQsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVNLE1BQU07UUFDVCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDOUIsQ0FBQztJQUVNLFdBQVcsQ0FBQyxTQUFlO1FBQzlCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDNUMsQ0FBQztJQUVEOztPQUVHO0lBQ0ksVUFBVSxDQUFDLFFBQTJCLEVBQUUsVUFBMEI7UUFDckUsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUVNLE9BQU8sQ0FBb0UsS0FBa0M7UUFDaEgsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNwQyxDQUFDOztBQTVGYyxZQUFPLEdBQTBCLFNBQVMsQ0FBQztBQUMzQyxvQkFBZSxHQUEyQixlQUFlLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTW9jaywgSU1vY2tPcHRpb25zLCBJUHJlc2V0QnVpbGRlciwgSVNlcXVlbmNlVmVyaWZpZXIgfSBmcm9tIFwiLi9tb3FcIjtcbmltcG9ydCB7IFRpbWVzIH0gZnJvbSBcIi4vdGltZXNcIjtcbmltcG9ydCB7IGluamVjdG9yRmFjdG9yeSB9IGZyb20gXCIuL2luamVjdG9yL2luamVjdG9yLmZhY3RvcnlcIjtcbmltcG9ydCB7IE1PQ0sgfSBmcm9tIFwiLi9pbmplY3Rvci9tb2NrLmluamVjdGlvbi10b2tlblwiO1xuaW1wb3J0IHsgRGVmYXVsdEluamVjdG9yQ29uZmlnIH0gZnJvbSBcIi4vaW5qZWN0b3IvZGVmYXVsdC1pbmplY3Rvci5jb25maWdcIjtcbmltcG9ydCB7IE1vY2tDb3JlIH0gZnJvbSBcIi4vY29yZS9tb2NrLWNvcmVcIjtcbmltcG9ydCB7IEluamVjdGlvbkZhY3RvcnksIFR5cGVPZkluamVjdGlvbkZhY3RvcnkgfSBmcm9tIFwiLi9pbmplY3Rvci9pbmplY3Rpb24tZmFjdG9yeVwiO1xuaW1wb3J0IHsgVHlwZSB9IGZyb20gXCIuL3N0YXRpYy5pbmplY3Rvci90eXBlXCI7XG5pbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiB9IGZyb20gXCIuL3N0YXRpYy5pbmplY3Rvci9pbmplY3Rpb25fdG9rZW5cIjtcbmltcG9ydCB7IE1PQ0tfQ09OU1RSVUNUT1IgfSBmcm9tIFwiLi9pbmplY3Rvci9tb2NrLWNvbnN0cnVjdG9yLmluamVjdGlvbi10b2tlblwiO1xuaW1wb3J0IHsgSUV4cHJlc3Npb24gfSBmcm9tIFwiLi9yZWZsZWN0b3IvZXhwcmVzc2lvbi1yZWZsZWN0b3JcIjtcbmltcG9ydCB7IFRyYWNrZXIgfSBmcm9tIFwiLi90cmFja2VyL3RyYWNrZXJcIjtcblxuLyoqXG4gKiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgSU1vY2t9IGludGVyZmFjZS5cbiAqL1xuZXhwb3J0IGNsYXNzIE1vY2s8VD4gaW1wbGVtZW50cyBJTW9jazxUPiB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgT3B0aW9uczogSU1vY2tPcHRpb25zPHVua25vd24+ID0gdW5kZWZpbmVkO1xuICAgIHByaXZhdGUgc3RhdGljIEluamVjdG9yRmFjdG9yeTogdHlwZW9mIGluamVjdG9yRmFjdG9yeSA9IGluamVjdG9yRmFjdG9yeTtcbiAgICBwcml2YXRlIHJlYWRvbmx5IGNvcmU6IE1vY2tDb3JlPFQ+O1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogSU1vY2tPcHRpb25zPFQ+ID0ge30pIHtcbiAgICAgICAgY29uc3QgcHJlT3B0aW9ucyA9IHsuLi5Nb2NrLm9wdGlvbnMsIC4uLm9wdGlvbnN9IGFzIElNb2NrT3B0aW9uczxUPjtcbiAgICAgICAgY29uc3QgcHJvdmlkZXJzID0gW1xuICAgICAgICAgICAge3Byb3ZpZGU6IE1PQ0ssIHVzZVZhbHVlOiB0aGlzLCBkZXBzOiBbXX0sXG4gICAgICAgICAgICB7cHJvdmlkZTogTU9DS19DT05TVFJVQ1RPUiwgdXNlVmFsdWU6IChvcHRzOiBJTW9ja09wdGlvbnM8dW5rbm93bj4pID0+IG5ldyBNb2NrKG9wdHMpLCBkZXBzOiBbXX0sXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGluamVjdG9yID0gTW9jay5JbmplY3RvckZhY3RvcnkocHJlT3B0aW9ucywgLi4ucHJvdmlkZXJzKTtcbiAgICAgICAgdGhpcy5jb3JlID0gaW5qZWN0b3IuZ2V0KE1vY2tDb3JlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogUmV0dXJucyBhIG1ldGhvZCB0aGF0IGlzIGludGVybmFsbHkgdXNlZCBmb3IgY3JlYXRpbmcgb2YgYW4gYW5ndWxhciBiYXNlZCBpbmplY3RvclxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgaW5qZWN0aW9uRmFjdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIE1vY2suSW5qZWN0b3JGYWN0b3J5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBTZXRzIGEgbWV0aG9kIHRoYXQgaXMgaW50ZXJuYWxseSB1c2VkIGZvciBjcmVhdGluZyBvZiBhbiBhbmd1bGFyIGJhc2VkIGluamVjdG9yXG4gICAgICovXG4gICAgc3RhdGljIHNldCBpbmplY3Rpb25GYWN0b3J5KHZhbHVlOiB0eXBlb2YgaW5qZWN0b3JGYWN0b3J5KSB7XG4gICAgICAgIE1vY2suSW5qZWN0b3JGYWN0b3J5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGRlZmF1bHQgbW9jayBvcHRpb25zIHRoYXQgd291bGQgYXBwbGllZCB0byBhbGwgaW5zdGFudGlhdGluZyBNb2NrIG9iamVjdHMuXG4gICAgICogQnkgZGVmYXVsdCBpdCBzZXRzIHtAbGluayBJTW9ja09wdGlvbnMudGFyZ2V0fSBhcyBhIGZ1bmN0aW9uLCB7QGxpbmsgSU1vY2tPcHRpb25zLmluamVjdG9yQ29uZmlnfSBhc1xuICAgICAqIGluc3RhbmNlIG9mIHtAbGluayBEZWZhdWx0SW5qZWN0b3JDb25maWd9IGFuZCB7QGxpbmsgSU1vY2tPcHRpb25zLm5hbWV9IGFzIHVuZGVmaW5lZC5cbiAgICAgKiBJZiBhbiBvcHRpb25zIGFyZSBwYXNzZWQgYXMgY29uc3RydWN0b3IgcGFyYW1ldGVyIHtAbGluayBNb2NrLmNvbnN0cnVjdG9yfSB0aGV5IHdpbGwgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIGlmIChNb2NrLk9wdGlvbnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgTW9jay5PcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHRhcmdldDogKCkgPT4gdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGluamVjdG9yQ29uZmlnOiBuZXcgRGVmYXVsdEluamVjdG9yQ29uZmlnKClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1vY2suT3B0aW9ucztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZGVmYXVsdCBtb2NrIG9wdGlvbnMgdGhhdCB3b3VsZCBhcHBsaWVkIHRvIGFsbCBpbnN0YW50aWF0aW5nIE1vY2sgb2JqZWN0cy5cbiAgICAgKiBJZiBhbiBvcHRpb25zIGFyZSBwYXNzZWQgYXMgY29uc3RydWN0b3IgcGFyYW1ldGVyIHRoZXkgd2lsbCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zLlxuICAgICAqL1xuICAgIHN0YXRpYyBzZXQgb3B0aW9ucyhvcHRpb25zOiBJTW9ja09wdGlvbnM8dW5rbm93bj4pIHtcbiAgICAgICAgTW9jay5PcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcmUub3B0aW9ucztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHRyYWNrZXIoKTogVHJhY2tlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcmUudHJhY2tlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcmUubmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0dXA8RSBleHRlbmRzIElFeHByZXNzaW9uPFQ+LFxuICAgICAgICBSID0gRSBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gaW5mZXIgTSA/IE0gOiBhbnk+KGV4cHJlc3Npb246IEUpOiBJUHJlc2V0QnVpbGRlcjxULCBSPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcmUuc2V0dXAoZXhwcmVzc2lvbik7XG4gICAgfVxuXG4gICAgcHVibGljIHZlcmlmeShleHByZXNzaW9uOiBJRXhwcmVzc2lvbjxUPiwgdGltZXMgPSBUaW1lcy5PbmNlKCkpOiBJTW9jazxUPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcmUudmVyaWZ5KGV4cHJlc3Npb24sIHRpbWVzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb2JqZWN0KCk6IFQge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3JlLm9iamVjdCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBwcm90b3R5cGVvZihwcm90b3R5cGU/OiBhbnkpOiBJTW9jazxUPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcmUucHJvdG90eXBlb2YocHJvdG90eXBlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgcHVibGljIGluc2VxdWVuY2Uoc2VxdWVuY2U6IElTZXF1ZW5jZVZlcmlmaWVyLCBleHByZXNzaW9uOiBJRXhwcmVzc2lvbjxUPik6IElNb2NrPFQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29yZS5pbnNlcXVlbmNlKHNlcXVlbmNlLCBleHByZXNzaW9uKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzb2x2ZTxTLCBSID0gUyBleHRlbmRzIEluamVjdGlvbkZhY3RvcnkgPyBUeXBlT2ZJbmplY3Rpb25GYWN0b3J5PFM+IDogUz4odG9rZW46IFR5cGU8Uz4gfCBJbmplY3Rpb25Ub2tlbjxTPik6IFIge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3JlLnJlc29sdmUodG9rZW4pO1xuICAgIH1cbn1cbiJdfQ==